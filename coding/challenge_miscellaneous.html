<html>
<head>
  <meta charset="UTF-8">
  <meta name="description" content="CY's Puzzle Created on The Weekly Challenge #xxx - ">
  <meta name="keywords" content="Perl">
  <meta name="author" content="Cheok-Yin Fung">  
  <link rel="styleSheet" href="../docs/main.css" type="text/css" media="all">
  <style>
    table td {
      border: 1px dotted black;
    }
    table th {
      border: 1px solid black;
    }
  </style>

<title>CY's Short Notes on The Weekly Challenge</title>
</head>

<body>

<div class="heading">
<h1 align="right">The Weekly Challenge &dash; Perl and Raku</h1>
</div>

<div class="bar">
<ul>

  <li><a href="../index.html">Hello World</a></li>

  <li><a href="blog.html">Blog</a></li>

  <li><a href="../cv.html">Résumé</a></li>

  <li><a href="../prod.html">Production</a></li>

  <li><a href="../links.html">Links</a></li>

</ul>
</div>

<div class="main">
  <h2>CY's Short Notes on The Weekly Challenge (latest: Week #121)</h2>

<p><i>If you want to challenge yourself on programming, especially on Perl and/or Raku,
go to <a href="https://theweeklychallenge.org/" title="The Weekly Challenge - Perl & Raku">https://theweeklychallenge.org</a>,
code the latest challenges, submit codes on-time (by GitHub or email).</i></p>

<p>Do tell me, if I am wrong or you strongly oppose my statements!</p>

<p>I put some reflections from what I learnt from writing the tasks (also from the review) or what I think I should be going to do. The content is too short to be a blogpost.</p>

<p>The reflections are placed in reverse chronological order.</p>

<hr>
<!--
<h4>Week #122 Task 2 Basketball Score</h4>

<p>[to be written]</p>
-->

<hr>

<h4>Week #118 Adventure of Knight and Week #121 Travelling Salesman</h4>

<h5>Performance</h5>

<p>In previous blogpost on Week 118, I mentioned that "...I have improved my code by a very trivial action (reducing calling to &compare_mini by moving a conditional).". The performance changed is shown below:</p>

<p><table style="text-align:center">
  <tr><th>Case</th><th>Number of Spots</th><th>Time<br>before</th><th>Time<br>after</th><th><small>Number of Permutations</small></th></tr>
  <tr><td><small>Task specific</small></td><td>6</td><td>0.066 sec</td><td>0.025 sec</td><td>720</td></tr>
  <tr><td>I</td><td>9</td><td>4.263 sec</td><td>2.760 sec</td><td>362,880</td></tr>
  <tr><td>II</td><td>10</td><td>46 sec</td><td>30.563 sec</td><td>3,628,800</td></tr>
  <tr><td>III</td><td>12</td><td>130 min</td><td>76 min 50.364 sec</td><td>479,001,600</td></tr>
</table></p>

Here is what changed:

<center><img src="../docs/assets/wk118_improve.png"></center>


<p>---</p>

<p>For Week #121 Task 2, I had just been lazy and use permutations again: </p>


<div style="color:white; background-color:black; padding-left: 5px;"><pre>&nbsp;<br><font color="#FCE94F">my</font> <font color="#34E2E2"><b>$v</b></font> = <font color="#FCE94F">chr</font>(<font color="#FCE94F">ord</font>(<font color="#AD7FA8">&quot;A&quot;</font>)+<font color="#34E2E2"><b>$N</b></font>-<font color="#AD7FA8">2</font>);
<font color="#FCE94F">my</font> <font color="#34E2E2"><b>$iter</b></font> = permutations([<font color="#AD7FA8">&apos;A&apos;</font>..<font color="#34E2E2"><b>$v</b></font>]);
<font color="#FCE94F">while</font> (<font color="#FCE94F">my</font> <font color="#34E2E2"><b>$c</b></font> = <font color="#34E2E2"><b>$iter-&gt;next</b></font>) {
    <font color="#FCE94F">my</font> <font color="#34E2E2"><b>$d</b></font> = calc_dist(<font color="#34E2E2"><b>$c</b></font>);
    <font color="#FCE94F">if</font> (<font color="#FCE94F">defined</font>(<font color="#34E2E2"><b>$d</b></font>) &amp;&amp; <font color="#34E2E2"><b>$d</b></font> &lt;= <font color="#34E2E2"><b>$min</b></font>) {  <font color="#34E2E2"># [*]</font>
        <font color="#FCE94F">if</font> (<font color="#34E2E2"><b>$d</b></font> &lt; <font color="#34E2E2"><b>$min</b></font>) {
            <font color="#34E2E2"><b>@arr_min</b></font> = ();
            <font color="#34E2E2"><b>$min</b></font> = <font color="#34E2E2"><b>$d</b></font>;
        }
        <font color="#FCE94F">push</font> <font color="#34E2E2"><b>@arr_min</b></font>, <font color="#34E2E2"><b>$c</b></font>;
    }
}
</pre></div>

<p>Using a similar and a logically same trick, I have improved my codes (place marked with [*]):</p>

<div style="color:white; background-color:black; padding-left: 5px;"><pre>&nbsp;<br>
<font color="#FCE94F">sub </font><font color="#34E2E2"><b>calc_dist </b></font>{
    <font color="#FCE94F">my</font> <font color="#34E2E2"><b>@seq</b></font> = <font color="#34E2E2"><b>@{$_[</b></font><font color="#AD7FA8">0</font><font color="#34E2E2"><b>]}</b></font>;
    <font color="#FCE94F">my</font> <font color="#34E2E2"><b>$dist</b></font> = <font color="#AD7FA8">0</font>;
    <font color="#34E2E2"><b>$dist</b></font> += <font color="#34E2E2"><b>$M-&gt;[</b></font><font color="#AD7FA8">0</font><font color="#34E2E2"><b>][</b></font> alp2n(<font color="#34E2E2"><b>$seq[</b></font><font color="#AD7FA8">0</font><font color="#34E2E2"><b>]</b></font>) <font color="#34E2E2"><b>]</b></font>;
    <font color="#FCE94F">for</font> <font color="#FCE94F">my</font> <font color="#34E2E2"><b>$i</b></font> (<font color="#AD7FA8">0.</font>.<font color="#34E2E2"><b>$#seq</b></font>-<font color="#AD7FA8">1</font>) {
        <font color="#34E2E2"><b>$dist</b></font> += <font color="#34E2E2"><b>$M-&gt;[</b></font> alp2n(<font color="#34E2E2"><b>$seq[$i]</b></font>) <font color="#34E2E2"><b>][</b></font> alp2n(<font color="#34E2E2"><b>$seq[$i</b></font>+<font color="#AD7FA8">1</font><font color="#34E2E2"><b>]</b></font>) <font color="#34E2E2"><b>]</b></font>;
        <font color="#FCE94F">return</font> <font color="#FCE94F">undef</font> <font color="#FCE94F">if</font> <font color="#34E2E2"><b>$dist</b></font> &gt;= <font color="#34E2E2"><b>$min</b></font>;  <font color="#34E2E2"># [*]   </font>         
    }
    <font color="#34E2E2"><b>$dist</b></font> += <font color="#34E2E2"><b>$M-&gt;[</b></font>alp2n(<font color="#34E2E2"><b>$seq[</b></font>-<font color="#AD7FA8">1</font><font color="#34E2E2"><b>]</b></font>)<font color="#34E2E2"><b>][</b></font><font color="#AD7FA8">0</font><font color="#34E2E2"><b>]</b></font>;
}

</pre></div>

<p><table style="text-align:center">
  <tr><th>Case</th><th>Number of Cities</th><th>Time<br>before</th><th>Time<br>after</th><th><small>Number of Permutations</small></th></tr>
  <tr><td>I</td><td>11</td><td>24.5 sec</td><td>16.5 sec</td><td>3,628,800</td></tr>
  <tr><td>II</td><td>12</td><td>5 min 7 sec</td><td>3 min 30 sec</td><td>39,916,800</td></tr>
</table></p>

<p>Here was the story of improving efficiency. However, after all, my codes are not efficient enough. My <i>practice</i> target is following the team member James Smith's elegant cache solution on these two tasks to write Java versions. </p>

<p><i>written on mid-July 2021</i></p>

<hr>

<p><small>Except from images and codes from personnels, the content of this page is released under a copyleft spirit. One may share (full or partial) content of this page on other platform if you share it under the free and open content spirit.</small></p>

<p><i>links: <a href="https://git hub.com/manwar/perlweeklychallenge-club/blob/master/">The Weekly Challenge Team Repository</a>, <a href="https://theweeklychallenge.org">Team Website</a>
</i>
</p>
<hr>
<p>Contact on twitter: <a href="https://twitter.com/e7_87">@e7_87</a>.</p>

<p>Created Date: 21st July, 2021.</p>

</body>

</html>


